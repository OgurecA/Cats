<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#282c34" />
    <meta
      name="description"
      content="A place where your vote counts"
    />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />
    <title>Fair Election</title>
  </head>
  <body>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        if (window.Telegram.WebApp) {
          Telegram.WebApp.ready();
      
          const userData = Telegram.WebApp.initDataUnsafe.user; // Получаем данные пользователя
      
          // Отправляем данные на сервер
          fetch('https://btc24news.online/api/save_user_data', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              id: userData.id,
              name: userData.first_name,
              username: userData.username,
              language_code: userData.language_code
            })
          })
          .then(response => response.json())
          .then(data => console.log('Success:', data))
          .catch(error => console.error('Error:', error));
        }
      });
      </script>
      
  </body>
</html>
